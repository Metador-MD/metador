{% if rows is defined and rows is not empty %}

{% for row in rows %}
    <div class="metadata-row clearfix" data-id="{{ row.id }}">
        <div class="left">
            {% if row.browserGraphic is defined and row.browserGraphic is not empty %}
                <img src="{{ row.browserGraphic }}" class="browser-graphic" />
            {% else %}
                <img src="{{ asset('bundles/metadortheme/img/preview.png') }}" class="browser-graphic" />
                {#<span class="icon-image browser-graphic"></span>#}
            {% endif %}
        </div>
        <div class="right">
            <div class="metadata-row-head clearfix">
                <div class="title">
                    <a href="{{ path('metadata_edit', { 'profile' : profile, 'id' : row.id }) }}">
                        {% if row.readonly %}
                        <span class="icon-lock"></span>
                        {% else %}
                        <span class="icon-file-text2"></span>
                        {% endif %}
                        {{ row.title }}
                    </a>
                </div>
                <div class="alternate-title">
                    {{ row.object.alternateTitle }}
                </div>
                <div class="user-date" title="Zuletzt bearbeitet von {{ row.updateUser.username }} am {{ row.updateTime|date("d.m.Y") }} um {{ row.updateTime|date("H:i") }} Uhr">
                    <span class="icon-user"></span>
                </div>
            </div>
            {% if row.abstract is defined and row.abstract is not empty %}
            <div class="metadata-row-abstract">
                {{ row.abstract }}
            </div>
            {% endif %}
            <div class="metadata-row-foot">
                {% for item in applicationGet('app-search-menu') %}
                {% if item.path is defined %}

                {# Add id to params #}
                {% set params = item.params %}
                {% set params = params|merge({ 'id':  row.id }) %}

                <a href="{{ path(item.path, params) }}"{% if item.target is defined %} target="{{ item.target }}"{% endif %} class="plugin-menu-item">
                    {% if item.icon is defined %}
                        <span class="{{ item.icon }}"></span>
                    {% endif %}
                    {{ item.label|trans }}
                </a>
                {% elseif item.label is defined %}
                <button type="submit" class="no-style-button plugin-menu-item">
                    {% if item.icon is defined %}
                        <span class="{{ item.icon }}"></span>
                    {% endif %}
                    {{ item.label|trans }}
                </button>
                {% endif %}
                {% endfor %}
            </div>
        </div>
    </div>
{% endfor %}
{% endif %}
