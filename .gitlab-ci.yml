image: wg-ubuntu-14-04-basic

cache:
    paths:
        - bin/
        - vendor/

before_script:
  - composer update --no-progress

stages:
  - test
  - build

job1:
    stage: test
    script:
        - bin/phpunit -c app/
        - bin/phpcs -n --extensions=php --standard=PSR2 --report=summary src/
        - bin/phpcpd src/

job2:
    stage: build
    only:
        - master
    script:
        - echo "hello world"
